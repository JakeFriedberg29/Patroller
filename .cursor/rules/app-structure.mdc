---
description:
globs:
alwaysApply: true
---

# User Rules

## Platform Admin (`platform_admin`)
- **Scope**: Global system access.  
- **Permissions**: Assigned to specific accounts or has global access.  
- **Capabilities**:  
  - Can manage all enterprises and organizations.
  - Can assign Platform Admins to specific accounts.  
  - Cannot see accounts they are not assigned to (if assignments exist).

## Account-level Roles
### Enterprise User (`enterprise_user`)
- **Scope**: Access limited to their Enterprise + its Organizations.  
- **Permissions**: Controlled via `account_users.access_role` (read/write).  
- **Full Access (write)**:  
  - Can add/manage users within their Enterprise.
  - Can manage Enterprise settings.  
  - Can view all Organizations under their Enterprise.
- **Read-Only Access (read)**:  
  - Can view Enterprise and Organization data.
  - Cannot modify users, settings, or data.
  
### Organization User (`organization_user`)
- **Scope**: Access limited to their Organization.  
- **Permissions**: Controlled via `account_users.access_role` (read/write).  
- **Full Access (write)**:  
  - Can add/manage users within their Organization.
  - Can manage Organization settings and data.
- **Read-Only Access (read)**:  
  - Can view Organization data.
  - Cannot modify users, settings, or data.

## Patroller (`patroller`)
- **Scope**: Access limited to their Organization.  
- **Capabilities**:  
  - Can submit reports and view assigned data.
  - Cannot manage users or settings.

---

## Role Consolidation Notes
- **Deprecated roles** (automatically migrated):
  - `enterprise_admin` → `enterprise_user`
  - `organization_admin` → `organization_user`
  - `member` → `patroller`
  - `responder` → `patroller`
- **Removed roles** (unused):
  - `supervisor`, `observer`, `team_leader`

---

⚠️ **Note**: Ensure all UI elements and permission checks accurately reflect these rules at each level.  
